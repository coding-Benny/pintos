# Pintos(í•€í† ìŠ¤) ì‹œì‘í•˜ê¸°

ì§€ë‚œ í•™ê¸°ì— ìš´ì˜ì²´ì œ ìˆ˜ì—…ì„ ë“£ê³  ë°°ìš´ ë‚´ìš©ì„ ë³µìŠµí•˜ê³  ë” íƒ„íƒ„íˆ í•˜ëŠ”ë°ëŠ” ì§ì ‘ í”„ë¡œì íŠ¸ë¥¼ í•´ ë³´ëŠ” ê²ƒì´ ë„ì›€ì´ ë  ê²ƒ ê°™ì•„ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë“¤ ì¤‘ **Pintos**ë¥¼ ì„ íƒí•˜ì—¬ ì§„í–‰í•˜ê²Œ ë˜ì—ˆë‹¤. í•­ìƒ ê·¸ë ‡ë“¯ì´ ì´ˆê¸° í™˜ê²½ì„¤ì •ì—ì„œ ë§ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªê²Œ ë˜ëŠ”ë° ëˆ„êµ°ê°€ì—ê²Œ ë„ì›€ì´ ë˜ê¸°ë¥¼ ë°”ë¼ë©° ì •ë¦¬í•´ë³´ì•˜ë‹¤.

## Pintosë€ ğŸ’¬

**Pintos(í•€í† ìŠ¤)**ëŠ” 80x86 ì•„í‚¤í…ì²˜ë¥¼ ìœ„í•œ ë‹¨ìˆœí•œ ìš´ì˜ì²´ì œ í”„ë ˆì„ì›Œí¬ë¡œ 2004ë…„ Stanford ëŒ€í•™êµì˜ Ben Pfaffê°€ êµìœ¡ìš©ìœ¼ë¡œ ê°œë°œí•˜ì˜€ë‹¤. ì»¤ë„ ìŠ¤ë ˆë“œ, ì‚¬ìš©ì í”„ë¡œê·¸ë¨ ë¡œë”© ë° ì‹¤í–‰, íŒŒì¼ ì‹œìŠ¤í…œì„ ë§¤ìš° ë‹¨ìˆœí•˜ê²Œ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§€ì›í•œë‹¤. ì‹¤ì œ x86 í•˜ë“œì›¨ì–´ì—ì„œ êµ¬ë™ì´ ê°€ëŠ¥í•˜ì§€ë§Œ Bochs ë˜ëŠ” QEMUì™€ ê°™ì€ x86 ì—ë®¬ë ˆì´í„° ìœ„ì— êµ¬ë™ë˜ê¸°ë„ í•œë‹¤.

## Pintosë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ  â—

1. ì»¤ë„ ìŠ¤ë ˆë“œì™€ ë©”ëª¨ë¦¬ ê´€ë¦¬, íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ ë“±ì„ í¬í•¨í•˜ì—¬ **ì‹¤ì œ ìš´ì˜ì²´ì œì˜ ì¤‘ìš”í•œ ë¶€ë¶„ì„ ì§ì ‘ êµ¬í˜„í•˜ë„ë¡ ìš”êµ¬**í•¨ìœ¼ë¡œì¨ í•™ë¶€ìƒë“¤ì—ê²Œ ìš´ì˜ì²´ì œì˜ ì„¤ê³„ ë° êµ¬í˜„ ê°œë…ì„ ì†Œê°œí•˜ê³  ê²½í—˜í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ì¶”ê°€ì ìœ¼ë¡œ ê°€ìƒ ë©”ëª¨ë¦¬ êµ¬í˜„ë„ í•  ìˆ˜ ìˆëŠ”ë° ì´ëŸ¬í•œ êµ¬í˜„ ê²½í—˜ì€ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.
2. ë¦¬ëˆ…ìŠ¤ì™€ ê°™ì€ ìƒìš© ìš´ì˜ì²´ì œëŠ” ì•½ 100ë§Œ ë¼ì¸ ì •ë„ë¡œ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼í•˜ëŠ”ë° ìµœì†Œ 1ì‹œê°„ ì´ìƒê±¸ë¦¬ë©°, ì´ ì¤‘ 80% ì´ìƒì´ ë‹¤ì–‘í•œ í•˜ë“œì›¨ì–´ ì§€ì›ì„ ìœ„í•œ ë””ë°”ì´ìŠ¤ ë“œë¼ì´ë²„ ì½”ë“œì— í•´ë‹¹í•œë‹¤. ë°˜ë©´ì— **PintosëŠ” ê°„ë‹¨í•´ì„œ ì´í•´í•˜ê¸° ì¢‹ê³  ì»´íŒŒì¼ë„ ì‰¬ìš´ ìš´ì˜ì²´ì œ**ì´ë‹¤.

## Pintos ì‹œì‘í•˜ê¸° ğŸ‘©ğŸ»â€ğŸ’»

ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ íŠ¹ì • ë²„ì „ ì´í›„ì˜ ìµœì‹  ë²„ì „ë“¤ë„ ì´ìš© ê°€ëŠ¥í•˜ë‹¤ê³  ì¨ì ¸ ìˆì§€ë§Œ í™˜ê²½ ì…‹íŒ… ê³¼ì •ì´ ì›í™œí•˜ê²Œ ì§„í–‰ë˜ì§€ ì•Šì•˜ë‹¤. ì°¾ì•„ë³´ë‹ˆ ë‹¤ë¥¸ ë¶„ë“¤ë„ ì´ ë‹¨ê³„ì—ì„œ ë§ì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªìœ¼ì…¨ë‹¤ê³  í•˜ì—¬ í•œ [ë¸”ë¡œê·¸](https://bowbowbow.tistory.com/9?category=175252)ë¥¼ ì°¸ê³ í•˜ì—¬ í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œ ì œì‹œí•˜ëŠ” ë²„ì „ìœ¼ë¡œ ì„¤ì¹˜í–ˆê³  ë•ë¶„ì— ë¹„êµì  ë¹ ë¥´ê²Œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì—¬ ì§„í–‰í•  ìˆ˜ ìˆì—ˆë‹¤.

> í•„ìëŠ” Windows 10 64bitsì—ì„œ ì§„í–‰í•˜ë¯€ë¡œ ê°€ìƒë¨¸ì‹  í™˜ê²½ì´ í•„ìš”í•˜ë‹¤.

### 1. Ubuntu(ìš°ë¶„íˆ¬) ì„¤ì¹˜í•˜ê¸°

[VirtualBox](http://www.virtualbox.org)ì— ë¦¬ëˆ…ìŠ¤ ê°€ìƒë¨¸ì‹ ì„ ì„¤ì¹˜í•˜ê³ , ì´ë¯¸ì§€ íŒŒì¼ì€ **ë°˜ë“œì‹œ** [**ubuntu-12.04.5-desktop-i386.iso**](https://releases.ubuntu.com/12.04/ubuntu-12.04.5-desktop-i386.iso)ë¥¼ ì¤€ë¹„í•´ì•¼ í•œë‹¤. ìì„¸í•œ ë°©ë²•ì€ êµ¬ê¸€ë§ì„ í†µí•´ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆë‹¤.

> ë‹¤ì†Œ ì‹œê°„ì´ ê±¸ë¦¬ë‹ˆ ì¸í„°ë„· ì†ë„ê°€ ë¹ ë¥¸ í™˜ê²½ì—ì„œ ì„¤ì¹˜í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì¼ì„ í•˜ë©° ì—¬ìœ ë¥¼ ë‘ëŠ” í¸ì´ ì¢‹ë‹¤.â³

![ìš°ë¶„íˆ¬ ì„¤ì¹˜í•˜ê¸°](https://cdn-images-1.medium.com/max/1000/1*T5GsBShGnPeE6deggCOr-g.jpeg)

![ë””ìŠ¤í¬ ì„¤ì •í•˜ê¸°](https://cdn-images-1.medium.com/max/750/1*RdgCjZqpxqBoh78IeLVPMA.png)

### 2. **gcc-4.4 ì„¤ì¹˜í•˜ê¸°**

ìš°ë¶„íˆ¬ ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìœ¼ë©´ í„°ë¯¸ë„ì—ì„œ ë‹¤ìŒ ëª…ë ¹ì„ í†µí•´ gcc ì»´íŒŒì¼ëŸ¬ë¥¼ ì„¤ì¹˜í•œë‹¤.

```
sudo apt-get install gcc-4.4
sudo mv /usr/bin/gcc-4.4 /usr/bin/gcc
```

### 3. **QEMU ì„¤ì¹˜í•˜ê¸°**

í•€í† ìŠ¤ëŠ” ê°€ìƒí™˜ê²½ ì—ë®¬ë ˆì´í„°ë¡œ Bochsì™€ QEMU ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤. ê³µì‹ ë¬¸ì„œì— ì˜í•˜ë©´ Bochsê°€ ëŠë¦¬ê¸° ë•Œë¬¸ì— QEMUë¥¼ ì´ìš©í•  ìˆ˜ ì—†ëŠ” ê²½ìš° Bochsë¥¼ ì´ìš©í•˜ë¼ê³  ì„œìˆ í•˜ì˜€ìœ¼ë‚˜ ë¬´ìŠ¨ ì´ìœ ì—ì„œì¸ì§€ Bochsë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…ë˜ì–´ ìˆë‹¤.ğŸ™„ Bochsë¥¼ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•ì€ ê³µì‹ ë¬¸ì„œì™€ íƒ€ ë¸”ë¡œê·¸ì— ì„¤ëª…ì´ ë§ì´ ë˜ì–´ìˆìœ¼ë¯€ë¡œ ì„¤ëª…ì„ ìƒëµí•˜ê³  í•„ìëŠ” ì†ë„ê°€ ë¹ ë¥¸ QEMUë¡œ ì§„í–‰í•˜ê¸°ë¡œ ê²°ì •í•˜ì—¬ ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„¤ëª…í•œë‹¤.

```
sudo apt-get install qemu
```

### 4. **Pintos ì„¤ì¹˜í•˜ê¸°**

1. Pintos ì†ŒìŠ¤ ì½”ë“œë¥¼ ë‹¤ìš´ ë°›ì•„ ì ì ˆí•œ ìœ„ì¹˜ì— ì••ì¶•ì„ í‘¼ë‹¤.

```
wget http://www.stanford.edu/class/cs140/projects/pintos/pintos.tar.gz
```

ìŠ¤íƒ í¬ë“œ ëŒ€í•™êµì—ì„œëŠ” ì‹¤ìŠµì„œë²„ì—ì„œ ì§„í–‰í•˜ë¯€ë¡œ SSHë¡œ í•™êµ ê³„ì •ì„ ì‚¬ìš©í•´ ì ‘ì†í•˜ì—¬ ì‹¤ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ì§€ë§Œ ë¡œì»¬ì—ì„œ ëŒë¦¬ê¸° ë•Œë¬¸ì— ìœ„ ë°©ì‹ìœ¼ë¡œëŠ” ì§„í–‰í•  ìˆ˜ ì—†ì—ˆë‹¤.ğŸ˜¥

ì´ ë•Œ, ë‘ ê°€ì§€ í•´ê²° ë°©ë²•ì´ ìˆë‹¤.

- [Pintos ì†ŒìŠ¤ ì½”ë“œ](http://www.stanford.edu/class/cs140/projects/pintos/pintos.tar.gz)ë¥¼ ì§ì ‘ ë‹¤ìš´ë°›ì€ í›„ íŒŒì¼ì„ ê°€ìƒë¨¸ì‹ ì— ì˜®ê²¨ ì§„í–‰í•˜ëŠ” ë°©ë²•â€Šâ€”â€Š[ë¡œì»¬ íŒŒì¼ì„ ê°€ìƒë¨¸ì‹ ê³¼ ê³µìœ í•˜ëŠ” ë°©ë²•](https://www.howtogeek.com/189974/how-to-share-your-computers-files-with-a-virtual-machine/)
- `wget` ëª…ë ¹ì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•(ì¶œì²˜:[ë©ë©ë©](https://bowbowbow.tistory.com/9?category=175252)ë‹˜ ë¸”ë¡œê·¸)

```
wget -O pintos.tar.gz http://bowbowbow.tistory.com/attachment/cfile9.uf@216A3B4956D876CB03A881.gz
```

> í›„ìê°€ í›¨ì”¬ ê°„í¸í•˜ë‹¤.ğŸ‘ğŸ»

ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì••ì¶•ì„ í’€ ìˆ˜ ìˆë‹¤.

```
tar xvf pintos.tar.gz
```

2. ì–´ëŠ ìœ„ì¹˜ì—ì„œë‚˜ pintosë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì„ í•œë‹¤.

> í•„ìëŠ” vië¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, ë³¸ì¸ì´ ì‚¬ìš©í•˜ëŠ” í…ìŠ¤íŠ¸ ì—ë””í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í¸ì§‘í•˜ë©´ ëœë‹¤.

```
sudo vi ~/.bashrc
```

ë§ˆì§€ë§‰ ë¼ì¸ì— í•€í† ìŠ¤ë¥¼ ì„¤ì¹˜í•œ ê²½ë¡œë¥¼ ì¶”ê°€í•œë‹¤.

> í•„ìëŠ” **/home/jhlee/pintos**ì— ì„¤ì¹˜í•˜ì—¬ ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•˜ì˜€ìœ¼ë¯€ë¡œ, **ë³¸ì¸ì˜ í™˜ê²½ì— ë§ê²Œ ê²½ë¡œë¥¼ ìˆ˜ì •í•˜ì—¬ ì ìš©**í•´ì•¼ í•œë‹¤. ì´í›„ ê²½ë¡œ ì„¤ì •ì—ì„œë„ ì´ì ì„ ìœ ì˜í•´ì•¼ í•œë‹¤.â˜ğŸ» í•€í† ìŠ¤ ì„¤ì¹˜ ê²½ë¡œëŠ” pintos ë””ë ‰í† ë¦¬ì—ì„œ **pwd** ëª…ë ¹ì–´ë¥¼ í†µí•´ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```
export PATH="$PATH:/home/jhlee/pintos/src/utils"
```

í˜¹ì‹œ ê¸°ì¡´ì— ì„¤ì •í•´ ë‘” í™˜ê²½ë³€ìˆ˜ê°€ ìˆë‹¤ë©´ `:`ë¥¼ êµ¬ë¶„ìë¡œ ì—¬ëŸ¬ ë””ë ‰í† ë¦¬ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤. (ì°¸ê³  : [How to add multiple path in $PATH variable linux?](https://stackoverflow.com/questions/21131590/how-to-add-multiple-path-in-path-variable-linux/21131629))

ì•„ë˜ ëª…ë ¹ì„ í†µí•´ `.bashrc` íŒŒì¼ì„ ì¬ë¡œë“œí•˜ì—¬ ìˆ˜ì •ì‚¬í•­ì„ ì ìš©ì‹œí‚¨ë‹¤.

```
source ~/.bashrc
```

### 5. **GDBMACROS ì„¤ì •í•˜ê³  ì»´íŒŒì¼í•˜ê¸°**

> Makefileê³¼ pintos-gdbëŠ” **pintos/src/utils**ì— ìœ„ì¹˜í•œë‹¤.

1. `Makefile`ë¥¼ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ê³  `LDFLAGS = -lm`ì„ `LDLIBS = -lm`ìœ¼ë¡œ ìˆ˜ì •í•œë‹¤.
2.  `pintos-gdb`ë¥¼ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ê³  GDBMACROS ë³€ìˆ˜ë¥¼ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```
GDBMACROS=/home/jhlee/pintos/src/misc/gdb-macros
```

3. í˜„ì¬ utils ë””ë ‰í† ë¦¬ê°€ ì•„ë‹Œ ê²½ìš° utils í´ë”ë¡œ ì´ë™ í›„ `make` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì»´íŒŒì¼í•œë‹¤.

### 6. **ì‹œë®¬ë ˆì´í„° ì„¤ì •í•˜ê³  ì»´íŒŒì¼í•˜ê¸°**

1. **pintos/src/threads**ì— ìœ„ì¹˜í•œ Make.varsë¥¼ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ì–´ ë§ˆì§€ë§‰ ì¤„ì˜ `SIMULATOR = --qemu`ë¡œ ìˆ˜ì •í•œë‹¤.
2. í˜„ì¬ threads ë””ë ‰í† ë¦¬ê°€ ì•„ë‹Œ ê²½ìš° threads í´ë”ë¡œ ì´ë™ í›„ `make` ëª…ë ¹ì–´ë¥¼ í†µí•´ ì»´íŒŒì¼í•œë‹¤.

### 7. **pintosì™€ Pintos.pm ìˆ˜ì •í•˜ê¸°**

1. **pintos/src/utils**ì— ìœ„ì¹˜í•œ `pintos`ë¥¼ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ì–´

- 103ë²ˆì§¸ ì¤„ì„`$sim = â€œqemuâ€  if !defined $sim;`ë¡œ ìˆ˜ì •í•˜ê³ 
- 259ë²ˆì§¸ ì¤„ì„ `my $name = find_file ('/home/jhlee/pintos/src/threads/build/kernel.bin');` ê³¼ ê°™ì€ ì ˆëŒ€ê²½ë¡œë¡œ ìˆ˜ì •í•œë‹¤.

> vi ì—ë””í„°ë¥¼ ì‚¬ìš©í•  ê²½ìš° `:103`, `:259`ì™€ ê°™ì´ `:line_number`ë¥¼ ì‚¬ìš©í•˜ë©´ ë¹ ë¥´ê³  í¸í•˜ê²Œ ì›í•˜ëŠ” ê³³ìœ¼ë¡œ ì´ë™í•  ìˆ˜ ìˆë‹¤.

2. ê°™ì€ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•œ `Pintos.pm`ì„ í…ìŠ¤íŠ¸ ì—ë””í„°ë¡œ ì—´ì–´ 362ë²ˆì§¸ ì¤„ì„ `$name = find_file ("/home/jhlee/pintos/src/threads/build/loader.bin") if !defined $name;` ì™€ ê°™ì€ ì ˆëŒ€ê²½ë¡œë¡œ ìˆ˜ì •í•œë‹¤.

#### 8. ì‹¤í–‰ê°€ëŠ¥í•œ QEMU **ë§í¬ ìƒì„±í•˜ê¸°**

ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ë§í¬ íŒŒì¼ì„ ë§Œë“  í›„ ë³€ê²½ì‚¬í•­ì´ ì ìš©ë˜ë„ë¡ í„°ë¯¸ë„ì„ ì¬ì‹œì‘í•œë‹¤.

```
sudo ln -s /usr/bin/qemu-system-i386 /usr/bin/qemu
```

#### 9. **Pintos ì‹¤í–‰í•˜ê¸°**

ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ í†µí•´ ê²°ê³¼ê°€ ì•„ë˜ì˜ ìŠ¤í¬ë¦°ìƒ·ê³¼ ê°™ì´ ë‚˜ì˜¨ë‹¤ë©´ ì •ìƒì ìœ¼ë¡œ Pintosê°€ ì„¤ì¹˜ëœ ê²ƒì´ë‹¤.ğŸ‰

```
pintos -- run alarm-multiple
```

![img](https://cdn-images-1.medium.com/max/1000/1*YsrpDYmG2LdU7gcoGWaiog.jpeg)

#### ğŸ“„ References

- ê³µì‹ ë¬¸ì„œ : [Pintos Projects](https://web.stanford.edu/class/cs140/projects/pintos/pintos.html)
- [PintOs ì‹œì‘í•˜ê¸°](https://bowbowbow.tistory.com/9?category=175252)(ë©ë©ë©)
- [Installing PintOS on QEMU](https://cspracs.wordpress.com/installing-pintos-on-qemu/)
- [Pintos Projectâ€Š](http://esos.hanyang.ac.kr/files/courseware/undergraduate/PINTOS/Pintos_all.pdf)â€”â€ŠESOS LAB(PDF)